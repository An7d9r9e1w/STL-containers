
24b

    24b
   /
  5r

+ 1

--2-3 tree--

5 24

  5
 / \
1   24

--rb tree--

      24b
     /
    5r
   /
  1r

rotate-right

    5b
   / \
 1b   24b


+ 15

--2-3--

   5
  / \
 1   15 24

--rb--

   5b
  /  \
 1b   24b
     /
   15r

+3 +8

--2-3--

     5
    / \
 1 3   15 24

      5 15
    /  |  \
 1 3   8   24

--rb--

     5b                      5b
  /      \                /      \
 1b       24b   ->      3b       24b
  \       /            /         /
   3r   15r          1r        15r

          5b                  5b                  5b                 15b
       /      \            /      \            /      \            /     \
     3b       24b   ->   3b       15b   ->   3b       15r   ->   5r      24b
    /         /         /         / \       /         / \       /  \
  1r        15r       1r        8r  24r    1r       8b  24b    3b   8b
           /                                                  /
          8r                                                 1r


+13 +14

--2-3--

      5 15
    /   |  \
 1 3    8   24

       5 15
    /   |    \
 1 3   8 13   24

         5 15
    /     |     \
 1 3   8 13 14   24

       5 13 15
    /   /   |   \
 1 3   8   14   24

         13
       /    \
     5       15
   /   \    /  \
 1 3    8  14  24


--rb--

            15b
          /     \
         5r     24b
       /   \
      3b   8b
     /
   1r
add
            15b
          /     \
         5r     24b
       /   \
      3b   8b
     /       \
   1r        13r
left rotate
            15b
          /     \
         5r     24b
       /   \
      3b   13b
     /    /
   1r    8r
add
            15b
          /     \
         5r     24b
       /   \
      3b   13b
     /    /  \
   1r    8r   14r
color swap
            15b
          /     \
         5r     24b
       /   \
      3b   13r
     /    /  \
   1r    8b   14b
left rotate


         15b
        /  \
      13r  24b
     /  \
    5r  14b
   /  \
  3b  8b
 /
1r


    1b
      \
      13r
     /  \
    5r  14b
   /  \
  3b  8b


right rotate
          13b
        /     \
      5r       15r
     /  \     /  \
    3b  8b  16b  24b
   /
  1r
color swap
          13b
        /     \
      5b       15b
     /  \     /  \
    3b  8b  16b  24b
   /
  1r


Add element as in general binary tree
get parent
next

CASE 1: empty tree

    NULL            10b

CASE 2: red childs

swap colors

    5b          5b
   /  \        /  \
  3r  6r      3b  6b

     /           /
    5b          5r
   /  \        /  \
  3r  6r      3b  6b

get parent

CASE 3: right child is red

left rotation

     /               /
    4b              6b
   /  \            /  \
  3b   6r         4r  7b
      /  \       /  \
     5b   7b    3b  5b

CASE 4: node is red, left child is red

right rotation

     /          /
    5b         4b
   /          /  \
  4r         3r   5r
 /
3r


********
deleting
********

--2-3--

      1
    /   \
  0      2 3
 / \    / | \
*   *  a  b  c

      1
    /   \
  0      2
 / \    / \
*   *  a   bc

--rb--
   1b
  /  \
0b    3b <-
     /  \
    2r   cb
   /  \
  ab   bb

   1b
  /  \
0b    2b
/\   /  \
    ab   cb
        /
       br


more difficult

--2-3--

        3 7
   /     |      \
  1      5       9 11 <-
 / \    / \    /  |  \
0   2  4   6  8   10  12 13


        3 7
   /     |      \
  1      5       9
 / \    / \    /   \
0   2  4   6  8    10 12 13

        3 7
   /     |      \
  1      5       9 12
 / \    / \    /  |  \
0   2  4   6  8   10  13

--rb--

              7b
       /             \
      3r              11b <-
   /     \         /      \
  1b      5b      9r      13b
 /  \    /  \    /  \     /
0b  2b  4b  6b  8b  10b  12r

              7b
       /             \
      3r              12b
   /     \         /      \
  1b      5b      9r      13b
 /  \    /  \    /  \
0b  2b  4b  6b  8b  10b

much more difficult

--2-3--

        3 7 <-
   /     |      \
  1      5       9 11
 / \    / \    /  |  \
0   2  4   6  8   10  12 13

        3 9
   /     |      \
  1      5        11
 / \    / \     /    \
0   2  4   6  8 10  12 13

--rb--

              7b <-
       /             \
      3r              11b
   /     \         /      \
  1b      5b      9r      13b
 /  \    /  \    /  \     /
0b  2b  4b  6b  8b  10b  12r

              9b
       /             \
      3r              11b
   /     \          /     \
  1b      5b      10b      13b
 /  \    /  \    /        /
0b  2b  4b  6b  8r       12r
